import React, { useState } from "react";
import Link from "next/link";
import SearchBar from "./search_bar";
import Nav from "./Nav";
import { useContext } from "react";
import { GeneralContext } from "@/context/GeneralContext";
import TrackedLink from "./TrackedLink";
import { useRouter } from "next/router";

const Header = () => {
  const router = useRouter();
  const { pathname } = router;

  const isActive = pathname.includes("collections");
  const fillColor = isActive ? "#2740CD" : "black";
  //--------------------------------
  const [menuActive, setMenuActive] = useState(false);

  const { setMode, setSetMode } = useContext(GeneralContext);
  //const setMode = "user"

  const toggleMenu = () => {
    setMenuActive(!menuActive);

    const hamburger = document.querySelector(".hamburger");
    hamburger.classList.toggle("active");
  };

  //const toggleHighlight = () => {
  //  const currentPath = window.location.pathname;
  //  const menuItem = document.querySelector("menu-btn");

  //  if (currentPath === "/collection") {
  //    menuItem.classList.add("highlighted");
  //  } else {
  //    menuItem.classList.remove("highlighted");
  //  }
  //};
  const handleChangeMode = () => {
    setSetMode((prevMode) => (prevMode === "user" ? "company" : "user"));
  };

  return (
    <header className="header-cont w-full fixed">
      <div className="header">
        <div className="header__navbar__logo flex gap-4">
          <button
            className={`w-[2rem] h-[2rem] rounded-full ${
              setMode === "user" ? "bg-blue-950" : "bg-orange-900"
            } text-white`}
            onClick={handleChangeMode}
          >
            {setMode === "user" ? "U" : "C"}
          </button>
          <Link href="/">
            <button className="logo">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="34"
                height="30"
                viewBox="0 0 34 30"
                s
                fill="none"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M2.41128 0.315384C1.49685 0.802898 0.964075 2.04434 1.0304 3.53417C1.06705 4.35421 0.91834 4.9872 0.559949 5.53731C-0.932992 7.82965 0.726307 10.6996 3.56455 10.7344C4.34285 10.7442 4.5988 10.9438 5.73041 12.4246C6.43623 13.3483 7.31723 14.4618 7.68819 14.899C8.30468 15.6251 8.31645 15.6824 7.82727 15.5628C7.40522 15.4593 7.01019 15.7904 5.9647 17.1232C0.987611 23.4686 -0.299655 28.1965 2.55785 29.637C4.4493 30.5908 8.14741 29.4916 12.7116 26.6188C14.6185 25.4184 15.0432 25.2447 15.5035 25.4753C16.3661 25.9075 17.9465 25.7923 18.9251 25.2259C19.8058 24.7163 19.8259 24.7156 19.8259 25.1926C19.8259 25.5178 20.4509 26.0732 21.7002 26.8579C24.5454 28.645 27.4104 29.7983 29.3709 29.9455C30.9991 30.068 31.0644 30.0489 31.986 29.1861C32.9307 28.3017 33.0556 27.9171 32.9494 26.2212C32.9147 25.6688 33.1075 24.9878 33.4458 24.4684C33.8002 23.9243 33.9995 23.1899 34 22.4258C34.0008 21.4237 33.8593 21.0879 33.1152 20.328C32.3682 19.5648 32.0107 19.4033 30.8325 19.2974C29.7656 19.2012 29.3647 19.0465 29.1344 18.6408C28.9686 18.3491 28.3591 17.5086 27.78 16.7729C26.9897 15.7693 26.5987 15.4671 26.2135 15.5613C25.7201 15.6822 25.7214 15.6609 26.2464 15.0207C30.7667 9.51078 32.9246 5.73111 32.9885 3.21192C33.0987 -1.12762 28.3572 -1.06453 21.2365 3.36866C19.4111 4.50469 18.9468 4.69349 18.5124 4.4759C17.839 4.13837 16.1962 4.13837 15.5228 4.4759C15.0882 4.69349 14.6097 4.49818 12.7105 3.3271C9.29507 1.2213 6.87512 0.220987 4.83283 0.0702507C3.59237 -0.0213928 2.91437 0.0472146 2.41128 0.315384ZM7.39479 2.47902C8.48066 2.90218 10.3077 3.83489 11.4548 4.55177L13.5407 5.85481L13.6744 7.4175L13.8081 8.98045L11.3427 11.2788C9.98671 12.543 8.83264 13.5268 8.77808 13.4652C7.96581 12.5443 5.91817 9.84831 5.91817 9.69958C5.91817 9.59041 6.03397 9.43416 6.17573 9.35228C6.31748 9.2704 6.54829 8.81294 6.68897 8.33594C7.22308 6.52536 5.93528 4.59258 4.00265 4.30313C2.82611 4.1271 2.42198 3.37417 2.93656 2.31702C3.35754 1.45166 4.90263 1.50775 7.39479 2.47902ZM31.0681 2.22638C31.5231 3.02237 30.9529 5.00823 29.5707 7.44054C28.4214 9.46346 25.4911 13.4525 25.1418 13.4697C25.0501 13.4742 23.9148 12.4637 22.6192 11.2242L20.2634 8.97019L20.3242 7.53093C20.394 5.87409 20.6309 5.61593 23.6339 3.92353C27.4005 1.80096 30.4297 1.10938 31.0681 2.22638ZM4.45919 6.33055C4.82026 6.66858 5.1158 7.17563 5.1158 7.45732C5.1158 8.16117 4.18585 8.97094 3.37733 8.97094C2.56881 8.97094 1.63887 8.16117 1.63887 7.45732C1.63887 6.85012 2.77128 5.71584 3.37733 5.71584C3.61136 5.71584 4.09813 5.99252 4.45919 6.33055ZM18.288 6.51659C19.2335 7.5402 18.6847 7.83766 17.6862 6.8426C17.3407 6.49831 16.8082 6.21487 16.503 6.21287C16.0473 6.20961 16.0197 6.16579 16.349 5.96823C16.8764 5.65149 17.7058 5.88611 18.288 6.51659ZM16.8764 8.40755C17.5375 8.97094 17.5375 8.97094 16.9432 8.97094C16.1735 8.97094 15.2775 8.12536 15.285 7.40599C15.2909 6.84586 15.2936 6.84561 15.7531 7.34339C16.0074 7.61882 16.5126 8.09782 16.8764 8.40755ZM22.0434 13.0168C22.9567 13.9708 23.7345 14.8321 23.7719 14.931C23.8091 15.0299 22.785 16.1682 21.4962 17.4605C19.4991 19.4629 19.0642 19.7836 18.5533 19.6319C17.9625 19.4564 17.9537 19.3897 17.9574 15.1514C17.9593 12.7849 18.0334 10.5962 18.1217 10.2872C18.2821 9.72762 18.2861 9.72837 19.3324 10.5041C19.9101 10.9323 21.1297 12.063 22.0434 13.0168ZM15.6584 10.3749C16.0224 10.5056 16.0815 11.1511 16.0815 14.9904C16.0815 19.3943 16.0735 19.4561 15.4819 19.6319C14.971 19.7836 14.5364 19.4631 12.5398 17.4615C11.2515 16.1697 10.1975 15.0414 10.1975 14.9538C10.1975 14.7084 14.7651 10.2229 15.0149 10.2229C15.1363 10.2229 15.4257 10.2913 15.6584 10.3749ZM14.1884 22.0459C13.8178 22.1756 13.6744 22.4666 13.6744 23.0903C13.6744 23.8575 13.5011 24.0698 12.1365 24.9762C9.6112 26.6536 6.50336 28.0087 4.80929 28.171C3.4442 28.302 3.26901 28.2629 2.9839 27.7639C2.24492 26.4711 3.8518 22.7791 6.85827 18.8614C7.80962 17.622 8.58898 16.4707 8.59032 16.3029C8.59166 16.1352 9.96745 17.3183 11.6476 18.932C14.2665 21.4475 14.6292 21.8917 14.1884 22.0459ZM26.8084 18.4197C28.1609 20.0716 28.297 20.3553 27.8595 20.6084C27.3756 20.8883 27.0798 22.4565 27.3427 23.3479C27.6704 24.4592 29.2286 25.7472 30.2446 25.7472C30.8815 25.7472 31.0467 25.8762 31.1893 26.4836C31.8173 29.1605 28.358 28.7945 23.0054 25.618C21.639 24.8067 20.4405 24.2586 20.2126 24.3405C19.8858 24.4579 19.8665 24.3913 20.1059 23.9722C20.2669 23.6907 20.3675 22.9108 20.3292 22.2387L20.26 21.0165L22.7845 18.5539C24.3793 16.998 25.344 16.2258 25.4042 16.4564C25.4569 16.657 26.0886 17.5406 26.8084 18.4197ZM18.2211 21.4905C18.5154 21.766 18.7561 22.1698 18.7561 22.3879C18.7561 22.6837 18.4841 22.583 17.6862 21.9913C17.0978 21.5551 16.6164 21.1513 16.6164 21.0939C16.6164 20.7789 17.7638 21.0624 18.2211 21.4905ZM31.8614 21.4905C32.5252 22.112 32.5418 22.769 31.9122 23.4972C30.9732 24.5826 28.9194 23.8738 28.9194 22.4643C28.9194 21.7945 29.8681 20.9898 30.6579 20.9898C31.0256 20.9898 31.5672 21.2151 31.8614 21.4905ZM16.3273 23.1011C17.4461 23.9762 17.4902 24.3533 16.4297 23.9779C15.9392 23.8042 14.7544 22.2417 15.1133 22.2417C15.1767 22.2417 15.7231 22.6286 16.3273 23.1011Z"
                  fill="#7382F7"
                />
              </svg>
            </button>
          </Link>
        </div>

        <div className="header__navbar__logo-text">
          <div className="header__navbar__logo-mobilecontainer">
            <div className="header__navbar__logo-mobile"></div>
          </div>

        </div>

        <ul className={`nav-menu ${menuActive ? "active" : ""}`}>
          <Nav />
          {/*<li className="nav-item">
            <Link href={"/payment/select-payment-type"} className="nav-link">
              Payments
            </Link>
          </li>
          <li className="nav-item">
            <Link href={"/subscription/renew-sub"} className="nav-link">
              Subscription
            </Link>
          </li>

          <li className="nav-item">
            <Link href={"/signature"} className="nav-link">
              signaturetest
            </Link>
          </li>*/}
        </ul>

        {/*<SearchBar
          placeholder="search products"
          className="border-width-38 main-search"
        />*/}

        <div className="transition sm:w-[30rem] w-fit cursor-pointer hover:shadow-md hover:bg-stone-100 rounded-md shadow-sm text-[1.6rem] pl-[1.5rem] pr-2.5 py-[1rem] flex justify-between items-center bg-stone-50">
          <p className="sm:flex hidden">search products</p>
          <div className="search-container">
            <Link href="/search_page">
              <svg
                className="search"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 13 14"
                fill="#3B3A3A"
                aria-hidden="true"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M8.82264 10.3833C7.89957 11.0841 6.74835 11.5 5.5 11.5C2.46243 11.5 0 9.03757 0 6C0 2.96243 2.46243 0.5 5.5 0.5C8.53757 0.5 11 2.96243 11 6C11 7.24835 10.5841 8.39957 9.8833 9.32264L12.7803 12.2197C13.0732 12.5126 13.0732 12.9874 12.7803 13.2803C12.4874 13.5732 12.0126 13.5732 11.7197 13.2803L8.82264 10.3833ZM9.5 6C9.5 8.20914 7.70914 10 5.5 10C3.29086 10 1.5 8.20914 1.5 6C1.5 3.79086 3.29086 2 5.5 2C7.70914 2 9.5 3.79086 9.5 6Z"
                  fill="#3B3A3A"
                />
              </svg>
            </Link>
          </div>
        </div>

        <div className="header__navbar__navbuttons">
          <button className="contact-info-btn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
            >
              <path
                d="M12.5 4C13.5609 4 14.5783 4.42143 15.3284 5.17157C16.0786 5.92172 16.5 6.93913 16.5 8C16.5 9.06087 16.0786 10.0783 15.3284 10.8284C14.5783 11.5786 13.5609 12 12.5 12C11.4391 12 10.4217 11.5786 9.67157 10.8284C8.92143 10.0783 8.5 9.06087 8.5 8C8.5 6.93913 8.92143 5.92172 9.67157 5.17157C10.4217 4.42143 11.4391 4 12.5 4ZM12.5 14C16.92 14 20.5 15.79 20.5 18V20H4.5V18C4.5 15.79 8.08 14 12.5 14Z"
                fill="black"
              />
            </svg>
          </button>

          <button className={`menu-btn`}>
            <TrackedLink href="/collections">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill={fillColor}
              >
                <path
                  d="M12.0001 2C11.5001 2 11.0001 2.19 10.5901 2.59L7.29006 5.88L12.0001 10.58L16.7101 5.88L13.4101 2.59C13.0001 2.19 12.5001 2 12.0001 2ZM5.88006 7.29L2.59006 10.59C1.80006 11.37 1.80006 12.63 2.59006 13.41L5.88006 16.71L10.5801 12L5.88006 7.29ZM18.1201 7.29L13.4201 12L18.1201 16.71L21.4101 13.41C22.2001 12.63 22.2001 11.37 21.4101 10.59L18.1201 7.29ZM12.0001 13.42L7.29006 18.12L10.5901 21.41C11.3701 22.2 12.6301 22.2 13.4101 21.41L16.7101 18.12L12.0001 13.42Z"
                  fill=""
                />
              </svg>{" "}
            </TrackedLink>
          </button>

          {/*HAMBURGER FOR PHONES/ SMALL SCREENS===================*/}
          <button className="hamburger" onClick={toggleMenu}>
            <span className="bar"></span>
            <span className="bar"></span>
            <span className="bar"></span>
          </button>
          {/*------------------------------------------------------*/}
        </div>
      </div>
    </header>
  );
};

export default Header;
